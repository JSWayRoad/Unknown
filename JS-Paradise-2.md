# JS-Paradise-2


# Браузер: документ, события, интерфейсы

https://learn.javascript.ru/browser-environment

  Каждая среда предоставляет свою функциональность, которую спецификация JavaScript называет **окружением**(браузер,веб-сервер,кофеварка...).  
Окружение предоставляет свои объекты и дополнительные функции.

**Document Object Model**, сокращённо DOM – объектная модель документа, которая представляет все содержимое страницы в виде объектов, которые можно менять.  
Объект document – основная «входная точка». С его помощью мы можем что-то создавать или менять на странице.

**Объектная модель браузера** (Browser Object Model, BOM) – это дополнительные объекты, предоставляемые браузером (окружением), чтобы работать со всем, кроме документа.  
(Объект navigator, location,Функции alert/confirm/prompt ...)

https://dom.spec.whatwg.org.  
https://www.w3.org/TR/cssom-1/.  
https://html.spec.whatwg.org. 

## DOM-дерево

https://learn.javascript.ru/dom-nodes

Глобальный объект предоставляет переменные и функции, доступные в любом месте программы. По умолчанию это те, что встроены в язык или среду исполнения.  
В браузере он называется **window**

Основой HTML-документа являются теги.

В соответствии с объектной моделью документа («Document Object Model», коротко DOM), каждый HTML-тег является объектом. Вложенные теги являются «детьми» родительского элемента.  
Текст, который находится внутри тега, также является объектом.  
Все эти объекты доступны при помощи JavaScript, мы можем использовать их для изменения страницы.  

ДOM – это представление HTML-документа в виде дерева тегов


### Блочное строение программы  

Программа состоит из 2-ух блоков: сейчас и потом.  
Блок **сейчас** выпонится немедленно, как  только  мы запустим свою программу.  

Каждый раз, когда мы упаковываем фрагмент кода в функ и указваем, что она должна быть выполнена по некоторому событию(таймер, щелчок мышью, ответ Ajax  и т д),  
мы создаём в своем коде блок, **потом**, а следоватлеьно, вводим асинхронность в свою программу.  

### Цикл событий  

Движок  JS работает внутри **управляющей среды**.  
Цикл событий - механизм, который обеспречивает выполнение нескольких фрагментов нашей  программы, обращаясь с вызовами к движку JS в разные моменты времени.  
Движок JS  сам по себе не обладает внутренним чувством времени, но он становится **средой исполнения* для любого произвольного фрагмента JS. **Планирование событий**  
выполнение фрагмента кода JS) всегда осуществляется окружающей средой.  

Например, когда  наша программа JS  выдаёт запрос Ajax для получения данных с сервера, мы опр код реакции в функции(обычно наз **функ обр выз**), а движок  JS говорит  
упр среде:'я собириаюсь ненадолго приостановить вып, но когда ты завершишь обр этого сетевого запроса и получишь данные, вызови эту функ'.  

Браузер настраивается для прослушивания ответа от сети, и когда у него появятся данные, чтобы передать их программе, планирует выполнение функ обр выз, вставляя в ее цикл  
событий.

Наша ПР обычно разбивается на множество мелких блоков, которые вып друг за другом в очереде цикла событий. И с тех точки зрения туда могут попасть др события.

### Параллельные потоки

Суть асснхронности - управление промежутком **сейчас** и **потом**.  
Параллелизм обзнач вохможность одновременного вып операций.  

Самые распространенные средства организации параллельных вычислений - **процессы** и **потоки**(threads). Процессы и потоки вып независимо и могут вып одновремеенно на  
разные процессорах и разн компьютерах, но несколько потоков могут совместно исп общую память одного процесса.  

C др стороны, цикл событий разбивает свою работу на задачи и вып их последовательно, что делает невозможным параллельный доступ и изм общ памяти. Параллелизм и последовательность  не могут существовать в форму взаимодействующих циклов србытий  в разных потоках.

**Выполнение до завершения**(run-to-complete) - когда одна функция начнет выполняться, весь её код будет завершен до того, до того как начнёт вып др  функ.

### Итоги

Программа JS(практически) всегда разбивается на 2 и более блока: **сейчас** и **потом**. Хотя программа вып по блокам, все они совместно исп одинаковый доступ к обл вид и состоянию программы, поэтому каждое изм осущ поверх предыдущего.  
**Тик** - это каждая итерация цикла событий  
Каждый раз, когда в системе имеются события для обр, цикл событий вып до тех пор, пока очередь не опустеет. Действия пользователя, операции ввода/вывода и таймеры помещают события в очередь событий.  

В любой момент времени может обрабатываться только одно событие из очереди. В то время, пока событие вып, оно может прямо или косвенно породить одно или несколько посл  событий.


## 2 Обратные вызовы  

Переключенние контекста , а не параллельное вып(многозадачность).  

### Итоги  
 Обратные вызовы - фундаментальная структурная единица асинхронного вып в  js  

Прежде всего, наш мозг все планирует последовательно, с блокировкой и с однопоточной семантикой, но обр выз выражают  асинх посл вып в нелинейном и непосл виде, что сильно затрудняет правильнай анализ такого кода. Код, который трудно анализировать, - это плохой код, который приводжит к ошибкам.  

Нам необходим способ выражения асинх в  более синхронном, последовательном, блокирующем виде, то есть так, как работает наш мозг.  

2 недостаток - это то, что обр вызовы  подвержены инверсии упр. Они неявно передают упр  др стороне(часто стороннему коды, который нам неподконтролен). Это  открывает ряд проблем.  

## 3 Обещаения  
